<div data-create-listing-target="createListingForm" class="create-listing-form d-none">
  <%= simple_form_for :new_listing, url: "listings", html: { class: "needs-validation", novalidate: true } do |f| %>
    <div class="mb-3">
      <%= f.label :game_name, "Add the name of the game you wish to make a listing for", class: "form-label" %>
      <%= f.text_field :game_name, class: "form-control", list: "game-list", data: { "create-listing-target" => "gameNameInput" }, required: true %>
      <div class="invalid-feedback">
        Please provide a game name.
      </div>
    </div>
    <div class="mb-3">
      <%= f.label :description, "Describe the game/condition of the game", class: "form-label" %>
      <%= f.text_area :description, class: "form-control", rows: 3, required: true %>
      <div class="invalid-feedback">
        Please provide a description.
      </div>
    </div>
    <div class="mb-3">
      <%= f.label :price, "How much would you like to rent it out for?", class: "form-label" %>
      <%= f.number_field :price, class: "form-control", required: true %>
      <div class="invalid-feedback">
        Please provide a price.
      </div>
    </div>
    <div class="mb-3">
      <%= f.label :max, "How long would you like to rent it out for?", class: "form-label" %>
      <%= f.number_field :max, class: "form-control", required: true %>
      <div class="invalid-feedback">
        Please provide a rental duration.
      </div>
    </div>
    <div class="mb-3">
      <%= f.label :photos, "Upload photos", class: "form-label" %>
      <%= f.file_field :photos, multiple: true, class: "form-control", data: { limit: 4 }, required: true %>
      <div class="invalid-feedback">
        Please upload photos.
      </div>
    </div>
    <div class="mb-3">
      <%= f.label :platform, "Select platform", class: "form-label" %>
      <%= f.select :platform, [], {}, class: "form-select", data: { "create-listing-target" => "platformInput" }, required: true %>
      <div class="invalid-feedback">
        Please select a platform.
      </div>
    </div>
    <datalist id="game-list" data-create-listing-target="platformDropdown"></datalist>

    <div class="d-grid gap-2">
      <%= f.submit "Save Listing", class: "btn btn-primary btn-lg" %>
    </div>
  <% end %>
</div>

<!-- Add custom CSS for additional styling -->
<style>
  .create-listing-form {
    padding: 20px;
    background-color: #f8f9fa;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  .form-label {
    font-weight: bold;
  }
</style>

<!-- Add JavaScript for Bootstrap validation -->
<script>
  (function () {
    'use strict'

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
      .forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }

          form.classList.add('was-validated')
        }, false)
      })
  })()
</script>
