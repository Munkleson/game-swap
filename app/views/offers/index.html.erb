<div class="container mt-3">
  <div class="row">
    <div class="col-6">
      <h1><%= @listing.game.name %></h1>
      <% if @offers.any? %>
        <% @offers.each do |offer| %>
          <div class="card-product mt-3">
            <p>Start Date: <%= offer.start_date %></p>
            <p>End Date: <%= offer.start_date + @listing.max %></p>
            <p>Offer: <%= offer.price %></p>
            <p>Comments: <%= offer.comments %><p>
            <p>From <%= offer.user.email %></p>
            <% if offer.pending? %>
              <div class="d-flex">
                <%= simple_form_for offer do |f| %>
                  <%= f.input :status, as: :hidden, input_html: { value: "accepted" } %>
                  <%= f.submit "Accept", class: "btn btn-primary" %>
                <% end %>
                <%= simple_form_for offer do |f| %>
                  <%= f.input :status, as: :hidden, input_html: { value: "rejected" } %>
                  <%= f.submit "Reject", class: "btn btn-danger mx-3" %>
                <% end %>
              <% else %>
                  <p>Offer status: <strong><%= offer.status.capitalize %></strong></p>
                  <%= link_to "Chat with #{offer.user.username}", new_chat_path(offer.user), class: "btn btn-primary" %>
              <% end %>
              </div>
          </div>
          <% end %>
        <% else %>
          <h2 class="mt-3">No offers for this listing</h2>
      <% end %>
    </div>
  </div>
</div>
